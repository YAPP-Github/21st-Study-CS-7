# Docker

## Docker 란?

도커는 애플리케이션을 신속하게 구축, 테스트 및 배포할 수 있는 소프트웨어 플랫폼이다.

소프트웨어를 `컨테이너` 라는 표준화된 유닛으로 패키징하며, 컨테이너는 라이브러리, 시스템 도구, 코드 등 소프트웨어 실행에 필요한 모든 것이 포함되어 있다. 

즉, 도커는 컨테이너 환경에서 독립적으로 애플리케이션을 실행할 수 있도록 컨테이너를 만들고 관리하는 것을 도와주는 도구이다. 도커를 통해 애플리케이션을 실행하면 독립적인 환경에서 일관된 결과를 보장한다.

### 사용하는 이유

1. 애플리케이션을 빠르고 일관되게 제공할 수 있다. 도커는 개발자가 로컬 컨테이너를 사용하여 표준화된 환경에서 작업을 할 수 있도록 함으로써 개발 라이프사이클을 간소화한다한다. 이러한 도커 컨테이너는 CI/CD 워크플로우에 이용하기 좋다.

2. 배포 및 스케일링에 용이하다. 도커 컨테이너의 이식성과 경량성 덕분에 동적으로 워크로드를 관리하고 비즈니스 요구사항에 따라 애플리케이션을 거의 실시간으로 확장하거나 중단할 수 있다.

3. 동일한 하드웨어에서 더 많은 워크로드를 실행할 수 있도록 해준다. 도커는 가볍고 빠르기 때문에, 하이퍼바이저 기반의 가상 머신보다 더 적은 리소스로 더 많은 작업을 수행해야 하는 고밀도 환경과 중소규모 배포에 이상적이다.

### Container

컨테이너는 도커에서의 실행 단위로써, 격리된 공간에서 프로세스가 동작하는 기술을 의미한다. 

컨테이너는 OS 가상화가 아닌 프로세스를 격리하는 방식으로 동작하기 때문에 가볍고 빠르다. 또한 CPU나 메모리는 프로세스가 필요한 만큼만 추가 사용하여 성능적으로 거의 손실이 없다.

#### 특징

- 서버에 여러 컨테이너를 실행하면 독립적으로 실행되어 VM(Virtual Machine) 을 사용하는 느낌을 준다.
- 실행 중인 컨테이너에 접속하여 명령어를 입력할 수 있다.
- apt-get 이나 yum 등 운영체제에서 사용하는 패키지 매니저를 통해 설치할 수 있고 사용자도 추가하고 프로세스를 백그라운드로 실행할 수 있다.
- CPU나 메모리 사용량을 제한할 수 있다.
- 호스트의 특정 포트와 연결하거나 호스트의 특정 디렉토리를 내부 디렉토리인 것처럼 사용 가능하다.
- 새로운 컨테이너를 만드는데 1~2초로 매우 빠르다.

### Image

코드, 런타임, 시스템 도구, 시스템 라이브러리 및 설정과 같이 컨테이너 실행에 필요한 모든 것을 포함하는 것으로, 상태값을 가지지 않고 변하지 않는다(Immutable).

컨테이너는 이미지르 실행한 상태로써, 추가되거나 변하는 값은 컨테이너에 저장된다.

#### 특징

- 도커 이미지의 용량은 보통 수백 MB ~ 수 GB이지만 가상머신에 비하면 작은 용량이다.
- 상태값을 가지지 않고 변하지 않는다.
- 하나의 이미지를 통해 여러 컨테이너를 생성할 수 있고, 컨테이너를 삭제해도 이미지는 변하지 않는다.
- 이미지들은 Docker Hub를 통해 버전 관리 및 배포가 가능하다.
- 도커는 `Dockerfile` 이라는 파일로 이미지를 만든다.

<br/>

## Docker Architecture

도커는 `client-server` 아키텍처를 사용한다. 

![](https://docs.docker.com/engine/images/architecture.svg)

### Docker daemon 
- 도커 API 요청을 수신하고 이미지, 컨테이너, 네트워크 및 볼륨과 같은 도커 개체를 관리한다. 
- 도커 서비스를 관리하기 위해 다른 데몬과 통신할 수도 있다.

### Docker client 
- 도커 클라이언트는 도커 사용자가 도커와 상호 작용하는 주요 방법. 
- `docker run` 과 같은 명령을 사용하면 클라이언트는 이러한 명령을 도커 데몬에 보내고, 도커 데몬에서 그것들을 수행한다. 
- 도커 명령은 도커 API를 사용한다. 
- 도커 클라이언트는 둘 이상의 데몬과 통신할 수 있다.

### Docker registries
- 도커 이미지를 저장한다. 
- 도커 허브는 누구나 사용할 수 있는 공용 레지스트리이며, 도커는 기본적으로 도커 허브에서 이미지를 검색하도록 구성되어 있다.
- 개인 레지스트리를 실행할 수도 있다.
- `docker pull` 또는 `docker run` 명령을 사용하면 구성된 레지스트리에서 필요한 이미지가 가져온다. 
- `docker push` 명령을 사용하면 이미지가 구성된 레지스트리에 푸시된다.

<br/>

## Docker compose
> 자세한 내용은 [공식 문서](https://docs.docker.com/compose/compose-file/)를 참고하자.

- Docker Compose는 여러 개의 컨테이너(container)로 구성된 애플리케이션을 관리하기 위한 간단한 오케스트레이션(Orchestration) 도구이다.
- `docker-compose.yml` 파일을 통해 docker compose를 설정한다.


<br/>


> 🔖 [참조]
> - https://tecoble.techcourse.co.kr/post/2021-08-14-docker/
> - https://docs.docker.com/get-started/overview/
